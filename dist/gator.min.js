!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Gator=e()}}(function(){var e,t,i;return function e(t,i,s){function n(o,a){if(!i[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=i[o]={exports:{}};t[o][0].call(f.exports,function(e){var i=t[o][1][e];return n(i?i:e)},f,f.exports,e,t,i,s)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,i,s){!function(t,i){if("function"==typeof e&&e.amd)e(["exports"],i);else if("undefined"!=typeof s)i(s);else{var n={exports:{}};i(n.exports),t.config=n.exports}}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=e.priorityDefault=30,i=e.appPrefix="gt",s=e.fieldQuery={prefix:"^"+i,input:"input:not(:disabled):not([readonly]):not([type=hidden]):not([type=reset]):not([type=submit]):not([type=button])",select:",select[required]:not(:disabled):not([readonly])",textarea:",textarea[required]:not(:disabled):not([readonly])",messages:"["+i+"-messages]",message:"["+i+"-message]"},n=e.attributes={prefix:i+"-",messages:i+"-messages",message:i+"-message"},r=e.ruleTypes={email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,number:/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,integer:/^-?\d+$/,digits:/\d+$/,alphanum:/^\w+$/i,date:/^(\d{4})-(\d{2})-(\d{2})$/,url:/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/},o=e.rules={required:{fn:function e(t){return/\S/.test(t)},priority:1024,handshake:!1},type:{fn:function e(t){var i=r[this.params[0]];return i.test(t)},priority:256,handshake:!1},minlength:{fn:function e(t){return t.length>=this.params[0]},priority:512,handshake:!1},maxlength:{fn:function e(t){return t.length<=this.params[0]},priority:512,handshake:!1},handshake:{fn:function e(t,i,s){console.log("Inside handshake"),s()},priority:0,handshake:!0},all:{fn:function e(t,i,s){for(var n in t)if(!t[n].value)return void s();i()},priority:0,handshake:!0},one:{fn:function e(t,i,s){for(var n in t)if(t[n].value)return void i();s()},priority:0,handshake:!0},same:{fn:function e(t,i,s){var n=t[Object.keys(t)[0]];for(var r in t)if(t[r].value!==n.value)return void s();i()},priority:0,handshake:!0},groupAll:{fn:function e(t){for(var i=t,s=Array.isArray(i),n=0,i=s?i:i[Symbol.iterator]();;){var r;if(s){if(n>=i.length)break;r=i[n++]}else{if(n=i.next(),n.done)break;r=n.value}var o=r;if(!o.value)return!1}return!0},priority:0,handshake:!0},custom:{fn:function e(t,i,s,n){t.email.isEmail()?i():s()},priority:0,handshake:!0,required:!1},custom2:{fn:function e(t,i,s,n,r){},priority:0,handshake:!0,required:!1}},a=e.fieldState={INIT:0,WAIT:1,SUCCESS:2,ERROR:4,HANDSHAKE:5},u=e.validatorState={INIT:0,SUCCESS:1,ERROR:2,HANDSHAKE:3},l=e.objType={FIELD:0,FORM:1,MESSAGE:2}})},{}],2:[function(t,i,s){!function(n,r){if("function"==typeof e&&e.amd)e(["module","./config.js","./utils.js","./validator"],r);else if("undefined"!=typeof s)r(i,t("./config.js"),t("./utils.js"),t("./validator"));else{var o={exports:{}};r(o,n.config,n.utils,n.validator),n.formField=o.exports}}(this,function(e,t,i,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(s),a=function(){function e(s,n){r(this,e),this.uniqueId=(0,i.getUniqueId)(),this.objType=t.objType.FIELD,this.fieldState=t.fieldState.INIT,this._fieldElem=s,this.fieldName=s.getAttribute("name"),this.fieldValue=this._fieldElem.value,this.fieldValidator=null,this.formName=n,this._validators=[],this.onInit()}return e.prototype.onInit=function e(){this.registerValidators(),this.prioritizeValidators(),this.subscribe(),this.listener()},e.prototype.subscribe=function e(){this.subCBSuccess=i.pubSub.subscribe("field:callbackSuccess",this.callbackSuccess.bind(this)),this.subCBError=i.pubSub.subscribe("field:callbackError",this.callbackError.bind(this)),this.subCBIgnore=i.pubSub.subscribe("field:callbackIgnore",this.callbackIgnore.bind(this))},e.prototype.callbackSuccess=function e(t){this.uniqueId===t.uniqueId&&(this.clearError(),this.enable())},e.prototype.callbackError=function e(i){this.uniqueId===i.uniqueId&&(this.enable(),this.showError(i.key),this.fieldState=t.validatorState.ERROR)},e.prototype.callbackIgnore=function e(t){this.uniqueId===t.uniqueId&&this.enable()},e.prototype.listener=function e(){this._fieldElem.addEventListener("keyup",this.validate.bind(this),!1)},e.prototype.disable=function e(){this._fieldElem.disabled=!0},e.prototype.enable=function e(){this._fieldElem.disabled=!1},e.prototype.validate=function e(){this.fieldValue=this._fieldElem.value,this.fieldState=t.fieldState.WAIT;for(var s=this._validators,n=Array.isArray(s),r=0,s=n?s:s[Symbol.iterator]();;){var o;if(n){if(r>=s.length)break;o=s[r++]}else{if(r=s.next(),r.done)break;o=r.value}var a=o;if(a.validate(this.fieldValue),a.state===t.validatorState.ERROR)return this.showError(a.key),void(this.fieldState=t.fieldState.ERROR);if(a.state===t.validatorState.HANDSHAKE)return this.disable(),this.clearError(),this.fieldState=t.fieldState.HANDSHAKE,void i.pubSub.publish("handshake:execute",{key:a.key,fieldName:this.fieldName,fieldValue:this.fieldValue,uniqueId:self.uniqueId})}this.fieldValidator=validator,this.fieldState=t.fieldState.SUCCESS,this.clearError()},e.prototype.registerValidators=function e(){var s=this,n=this,r=null,a=new RegExp(t.fieldQuery.prefix,"i");(0,i.nl2arr)(this._fieldElem.attributes).forEach(function(e){r=e.name&&a.test(e.name)&&e.specified?e.name.slice(t.attributes.prefix.length):"required"===e.name&&e.specified?"required":null,r&&n._validators.push(new o.default(r,e.value,s.fieldName,s.uniqueId))})},e.prototype.prioritizeValidators=function e(){this._validators.length&&this._validators.sort(function(e,t){return t.priority-e.priority})},e.prototype.showError=function e(t){i.pubSub.publish("messages:show",{fieldName:this.fieldName,formName:this.formName,key:t})},e.prototype.clearError=function e(){i.pubSub.publish("messages:clear",{fieldName:this.fieldName,formName:this.formName})},e.prototype.destroy=function e(){this._fieldElem.removeEventListener("keyup",this.validate.bind(this),!1),this.subCBSuccess.remove(),this.subCBError.remove(),this._fieldElem=null,this._validators.length=0},e}();e.exports=a})},{"./config.js":1,"./utils.js":7,"./validator":8}],3:[function(t,i,s){!function(n,r){if("function"==typeof e&&e.amd)e(["module","./form-field","./messages","./utils.js","./config.js"],r);else if("undefined"!=typeof s)r(i,t("./form-field"),t("./messages"),t("./utils.js"),t("./config.js"));else{var o={exports:{}};r(o,n.formField,n.messages,n.utils,n.config),n.form=o.exports}}(this,function(e,t,i,s,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=r(t),u=r(i),l=function(){function e(t){o(this,e),this.elem=t,this.fields=[],this.messages=[],this.name=this.elem.getAttribute("name"),this.onInit()}return e.prototype.onInit=function e(){this.registerFormFields(),this.registerMessages()},e.prototype.registerFormFields=function e(){var t=this,i=this;(0,s.nl2arr)(this.elem.querySelectorAll(n.fieldQuery.input+n.fieldQuery.select+n.fieldQuery.textarea)).forEach(function(e){t.fields.push(new a.default(e,t.name))})},e.prototype.registerMessages=function e(){var t=this,i=this;(0,s.nl2arr)(this.elem.querySelectorAll(n.fieldQuery.messages)).forEach(function(e){t.messages.push(new u.default(e))})},e.prototype.destroy=function e(){this.elem=null,this.fields.length=0},e}();e.exports=l})},{"./config.js":1,"./form-field":2,"./messages":6,"./utils.js":7}],4:[function(t,i,s){!function(n,r){if("function"==typeof e&&e.amd)e(["module","./form","./handshake"],r);else if("undefined"!=typeof s)r(i,t("./form"),t("./handshake"));else{var o={exports:{}};r(o,n.form,n.handshake),n.gator=o.exports}}(this,function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=s(t),o=s(i),a=function(){function e(){n(this,e);var t=document.getElementById("customerForm"),i=o.default,s=new r.default(t);this.handShakes={}}return e.prototype.handshake=function e(t,i){return this.handShakes[t]=i,this},e}();e.exports=a})},{"./form":3,"./handshake":5}],5:[function(t,i,s){!function(n,r){if("function"==typeof e&&e.amd)e(["module","./utils","./form-field","./config.js"],r);else if("undefined"!=typeof s)r(i,t("./utils"),t("./form-field"),t("./config.js"));else{var o={exports:{}};r(o,n.utils,n.formField,n.config),n.handshake=o.exports}}(this,function(e,t,i,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(i),a=function(){function e(t){r(this,e),this.uniqueId=t,this.value=null,this.ready=!1}return e.prototype.isType=function e(t){return s.rules.type.fn.call({params:[t]},this.value)},e}(),u=function(){function e(){r(this,e),this._handshakes={},this.init(),window.hs=this._handshakes}return e.prototype.init=function e(){this.subscribe()},e.prototype.subscribe=function e(){this.subRegister=t.pubSub.subscribe("handshake:register",this.register.bind(this)),this.subExecute=t.pubSub.subscribe("handshake:addField",this.addField.bind(this)),this.subExecute=t.pubSub.subscribe("handshake:execute",this.execute.bind(this)),this.subReset=t.pubSub.subscribe("handshake:reset",this.reset.bind(this))},e.prototype.register=function e(t){this._handshakes.hasOwnProperty(t.key)||(this._handshakes[t.key]={fields:{},key:t.key})},e.prototype.addField=function e(t){this.register(t),this._handshakes[t.key].fields[t.fieldName]=new a(t.uniqueId)},e.prototype.setFieldReady=function e(t,i,s){var n=this._handshakes[t].fields[i];n.value=s,n.ready=!0},e.prototype.fieldsReady=function e(t){var i=this._handshakes[t].fields;for(var s in i)if(i.hasOwnProperty(s)&&!i[s].ready)return!1;return!0},e.prototype.execute=function e(t){this.setFieldReady(t.key,t.fieldName,t.fieldValue),!this.fieldsReady(t.key)&&s.rules[t.key].required||s.rules[t.key].fn(this._handshakes[t.key].fields,this.callback.bind(this._handshakes[t.key],"field:callbackSuccess"),this.callback.bind(this._handshakes[t.key],"field:callbackError"),this.callback.bind(this._handshakes[t.key],"field:callbackIgnore"))},e.prototype.callback=function e(i){for(var s in this.fields)this.fields.hasOwnProperty(s)&&t.pubSub.publish(i,{uniqueId:this.fields[s].uniqueId,key:this.key})},e.prototype.reset=function e(){},e.prototype.destroy=function e(){this.subRegister.remove(),this.subExecute.remove(),this.subExecute.remove(),this.subReset.remove()},e}();e.exports=new u})},{"./config.js":1,"./form-field":2,"./utils":7}],6:[function(t,i,s){!function(n,r){if("function"==typeof e&&e.amd)e(["module","./utils.js","./config.js"],r);else if("undefined"!=typeof s)r(i,t("./utils.js"),t("./config.js"));else{var o={exports:{}};r(o,n.utils,n.config),n.messages=o.exports}}(this,function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(t){s(this,e),this._msgsElem=t,this._messages={},this.formName=null,this.fieldName=null,this.onInit()}return e.prototype.onInit=function e(){var t=this._msgsElem.getAttribute(i.attributes.messages).split(".");this.formName=t[0],this.fieldName=t[1],this.register(),this.hideAll(),this.subscribe()},e.prototype.subscribe=function e(){var i=this;this.subShow=t.pubSub.subscribe("messages:show",function(e){e.fieldName===i.fieldName&&e.formName===i.formName&&(i.hideAll(),i.show(e.key))}),this.subClear=t.pubSub.subscribe("messages:clear",function(e){e.fieldName===i.fieldName&&e.formName===i.formName&&i.hideAll()}),this.subDestroy=t.pubSub.subscribe("messages:destroy",function(e){i.destroy()})},e.prototype.register=function e(){var s=this;(0,t.nl2arr)(this._msgsElem.querySelectorAll(i.fieldQuery.message)).forEach(function(e){var t=e.getAttribute(i.attributes.message);t&&(s._messages[t]=e)})},e.prototype.show=function e(t){this.validateKey(t),this._messages[t].style.display="block"},e.prototype.hideAll=function e(){var t=this._messages;for(var i in t)this.validateKey(i),t[i].style.display="none"},e.prototype.validateKey=function e(t){if(!this._messages.hasOwnProperty(t))throw new Error('Missing "gt-'+t+' in gt-messages="'+this.formName+"."+this.fieldName+'"')},e.prototype.destroy=function e(){this._elem=null,this._messages.length=0,this.subShow.remove(),this.subClear.remove(),this.subDestroy.remove()},e}();e.exports=n})},{"./config.js":1,"./utils.js":7}],7:[function(t,i,s){!function(t,i){if("function"==typeof e&&e.amd)e(["exports"],i);else if("undefined"!=typeof s)i(s);else{var n={exports:{}};i(n.exports),t.utils=n.exports}}(this,function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function i(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function s(e){}function n(e){}function r(e){}Object.defineProperty(e,"__esModule",{value:!0}),e.nl2arr=t,e.getUniqueId=i,e.isString=s,e.isObject=n,e.isArray=r;var o=e.pubSub=function(){var e={},t=e.hasOwnProperty;return{subscribe:function i(s,n){t.call(e,s)||(e[s]=[]);var r=e[s].push(n)-1;return{remove:function t(){delete e[s][r]}}},publish:function i(s,n){t.call(e,s)&&
// Cycle through topics queue, fire!
e[s].forEach(function(e){e(void 0!=n?n:{})})}}}()})},{}],8:[function(t,i,s){!function(n,r){if("function"==typeof e&&e.amd)e(["module","./config","./utils"],r);else if("undefined"!=typeof s)r(i,t("./config"),t("./utils"));else{var o={exports:{}};r(o,n.config,n.utils),n.validator=o.exports}}(this,function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(i,n,r,o){s(this,e),this.key=i,this.fieldName=r,this.fieldUniqueId=o,this.state=t.validatorState.INIT,this.params=n.length?n.split(","):[],this.onInit()}return e.prototype.onInit=function e(){this.setPriority(),this.setHandshake()},e.prototype.setPriority=function e(){if(!t.rules.hasOwnProperty(this.key))throw new Error('Invalid directive, "gt-'+this.key+'"');this.priority=t.rules[this.key].priority},e.prototype.setHandshake=function e(){var s=this;t.rules[this.key].handshake&&i.pubSub.publish("handshake:addField",{key:s.key,fieldName:s.fieldName,uniqueId:s.fieldUniqueId})},e.prototype.validate=function e(i){var s=this,n=t.rules[this.key];n.handshake===!0?this.state=t.validatorState.HANDSHAKE:this.state=n.fn.call(this,i)?t.validatorState.SUCCESS:t.validatorState.ERROR},e.prototype.destroy=function e(){this.params.length=0},e}();e.exports=n})},{"./config":1,"./utils":7}]},{},[4])(4)});