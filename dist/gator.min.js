!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Gator=e()}}(function(){var e,t,i;return function e(t,i,s){function r(o,a){if(!i[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(n)return n(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=i[o]={exports:{}};t[o][0].call(f.exports,function(e){var i=t[o][1][e];return r(i?i:e)},f,f.exports,e,t,i,s)}return i[o].exports}for(var n="function"==typeof require&&require,o=0;o<s.length;o++)r(s[o]);return r}({1:[function(t,i,s){!function(t,i){if("function"==typeof e&&e.amd)e(["exports"],i);else if("undefined"!=typeof s)i(s);else{var r={exports:{}};i(r.exports),t.config=r.exports}}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=e.validatorState={INIT:0,WAIT:1,SUCCESS:2,ERROR:4,HANDSHAKE:5},i=e.objType={FIELD:0,FORM:1,MESSAGE:2},s=e.priorityDefault=30,r=e.appPrefix="gt",n=e.fieldQuery={prefix:"^"+r,input:"input:not(:disabled):not([readonly]):not([type=hidden]):not([type=reset]):not([type=submit]):not([type=button])",select:",select[required]:not(:disabled):not([readonly])",textarea:",textarea[required]:not(:disabled):not([readonly])",form:"["+r+"-form]",messages:"["+r+"-messages]",message:"["+r+"-message]"},o=e.attributes={prefix:r+"-",messages:r+"-messages",message:r+"-message"},a=e.ruleTypes={email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,number:/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,integer:/^-?\d+$/,digits:/\d+$/,alphanum:/^\w+$/i,date:/^(\d{4})-(\d{2})-(\d{2})$/,url:/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/},u=e.rules={required:{fn:function e(t){return/\S/.test(t)},priority:1024,handshake:!1},type:{fn:function e(t){var i=a[this.params[0]];return i.test(t)},priority:256,handshake:!1},minlength:{fn:function e(t){return t.length>=this.params[0]},priority:512,handshake:!1},maxlength:{fn:function e(t){return t.length<=this.params[0]},priority:512,handshake:!1},group:{fn:function e(t,i,s){for(var r in t)if(!t[r].value)return void s();i()},priority:0,handshake:!0,required:!1},same:{fn:function e(t,i,s){var r=t[Object.keys(t)[0]];for(var n in t)if(t[n].value!==r.value)return void s();i()},priority:0,handshake:!0,required:!1}}})},{}],2:[function(t,i,s){!function(r,n){if("function"==typeof e&&e.amd)e(["module","./config.js","./utils.js","./validator"],n);else if("undefined"!=typeof s)n(i,t("./config.js"),t("./utils.js"),t("./validator"));else{var o={exports:{}};n(o,r.config,r.utils,r.validator),r.formField=o.exports}}(this,function(e,t,i,s){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=r(s),a=function(){function e(s,r){n(this,e),this.uniqueId=(0,i.getUniqueId)(),this.objType=t.objType.FIELD,this.fieldState=t.validatorState.INIT,this._fieldElem=s,this.fieldName=s.getAttribute("name"),this.fieldValue=this._fieldElem.value,this.fieldValidator=null,this.formName=r,this._validators=[],this.onInit()}return e.prototype.onInit=function e(){this.registerValidators(),this.prioritizeValidators(),this.subscribe(),this.listener()},e.prototype.subscribe=function e(){this.subCBSuccess=i.pubSub.subscribe("field:callbackSuccess",this.callbackSuccess.bind(this)),this.subCBError=i.pubSub.subscribe("field:callbackError",this.callbackError.bind(this)),this.subCBIgnore=i.pubSub.subscribe("field:callbackIgnore",this.callbackIgnore.bind(this))},e.prototype.callbackSuccess=function e(t){this.uniqueId===t.uniqueId&&(this.clearError(),this.enable())},e.prototype.callbackError=function e(i){this.uniqueId===i.uniqueId&&(this.enable(),this.fieldState!==t.validatorState.ERROR&&this.showError(i.key))},e.prototype.callbackIgnore=function e(t){this.uniqueId===t.uniqueId&&this.enable()},e.prototype.listener=function e(){this._fieldElem.addEventListener("keyup",this.validate.bind(this),!1)},e.prototype.disable=function e(){this._fieldElem.disabled=!0},e.prototype.enable=function e(){this._fieldElem.disabled=!1},e.prototype.validate=function e(){this.fieldValue=this._fieldElem.value,this.fieldState=t.validatorState.WAIT;for(var s=this._validators,r=Array.isArray(s),n=0,s=r?s:s[Symbol.iterator]();;){var o;if(r){if(n>=s.length)break;o=s[n++]}else{if(n=s.next(),n.done)break;o=n.value}var a=o;if(a.validate(this.fieldValue),a.state===t.validatorState.ERROR)return this.showError(a.key),void(this.fieldState=t.validatorState.ERROR);if(a.state===t.validatorState.HANDSHAKE)return this.disable(),this.clearError(),this.fieldState=t.validatorState.HANDSHAKE,void i.pubSub.publish("handshake:execute",{key:a.key,fieldName:this.fieldName,fieldValue:this.fieldValue,uniqueId:self.uniqueId})}this.fieldState=t.validatorState.SUCCESS,this.clearError()},e.prototype.registerValidators=function e(){var s=this,r=this,n=null,a=new RegExp(t.fieldQuery.prefix,"i");(0,i.nl2arr)(this._fieldElem.attributes).forEach(function(e){n=e.name&&a.test(e.name)&&e.specified?e.name.slice(t.attributes.prefix.length):"required"===e.name&&e.specified?"required":null,n&&r._validators.push(new o.default((0,i.convertCamelCase)(n),e.value,s.fieldName,s.uniqueId))})},e.prototype.prioritizeValidators=function e(){this._validators.length&&this._validators.sort(function(e,t){return t.priority-e.priority})},e.prototype.showError=function e(t){i.pubSub.publish("messages:show",{fieldName:this.fieldName,formName:this.formName,key:t})},e.prototype.clearError=function e(){i.pubSub.publish("messages:clear",{fieldName:this.fieldName,formName:this.formName})},e.prototype.destroy=function e(){this._fieldElem.removeEventListener("keyup",this.validate.bind(this),!1),this.subCBSuccess.remove(),this.subCBError.remove(),this._fieldElem=null,this._validators.length=0},e}();e.exports=a})},{"./config.js":1,"./utils.js":7,"./validator":8}],3:[function(t,i,s){!function(r,n){if("function"==typeof e&&e.amd)e(["module","./form-field","./messages","./utils.js","./config.js"],n);else if("undefined"!=typeof s)n(i,t("./form-field"),t("./messages"),t("./utils.js"),t("./config.js"));else{var o={exports:{}};n(o,r.formField,r.messages,r.utils,r.config),r.form=o.exports}}(this,function(e,t,i,s,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(t),u=n(i),l=function(){function e(t){o(this,e),this._elem=t,this._fields=[],this.name=null,this.onInit()}return e.prototype.onInit=function e(){this.name=this._elem.getAttribute("name"),this.registerFormFields()},e.prototype.registerFormFields=function e(){var t=this;(0,s.nl2arr)(this._elem.querySelectorAll(r.fieldQuery.input+r.fieldQuery.select+r.fieldQuery.textarea)).forEach(function(e){t._fields.push(new a.default(e,t.name))})},e.prototype.destroy=function e(){this._elem=null,this._fields.length=0},e}();e.exports=l})},{"./config.js":1,"./form-field":2,"./messages":6,"./utils.js":7}],4:[function(t,i,s){!function(r,n){if("function"==typeof e&&e.amd)e(["module","./config","./utils.js","./form","./messages","./handshake"],n);else if("undefined"!=typeof s)n(i,t("./config"),t("./utils.js"),t("./form"),t("./messages"),t("./handshake"));else{var o={exports:{}};n(o,r.config,r.utils,r.form,r.messages,r.handshake),r.gator=o.exports}}(this,function(e,t,i,s,r,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=o(s),h=o(r),d=o(n),c=function(){function e(){l(this,e),this._messages=[],this._forms=[]}return e.prototype.onInit=function e(){this._registerMessages(),this._registerForms()},e.prototype._registerForms=function e(){var s=this;(0,i.nl2arr)(document.querySelectorAll(t.fieldQuery.form)).forEach(function(e){s._forms.push(new f.default(e))})},e.prototype._registerMessages=function e(){var s=this;(0,i.nl2arr)(document.querySelectorAll(t.fieldQuery.messages)).forEach(function(e){s._messages.push(new h.default(e))})},e.prototype.destroy=function e(){this._messages.length=0,this._forms.length=0},e}(),p=function(e){function i(){return l(this,i),a(this,e.call(this))}return u(i,e),i.prototype.addRuleType=function e(i,s){if(!s instanceof RegExp)throw new Error(s+" must be a regular expression");if(t.ruleTypes.hasOwnProperty(i))throw new Error(i+" already exists as a rule type");if("string"!=typeof i)throw new Error(i+" must be a string.");return t.ruleTypes[i]=s,this},i.prototype.validator=function e(i,s,r,n){return t.rules[i]={fn:s,priority:n||0,handshake:!0,required:r||!1},this},i.prototype.init=function e(){return this.onInit()},i}(c);e.exports=p})},{"./config":1,"./form":3,"./handshake":5,"./messages":6,"./utils.js":7}],5:[function(t,i,s){!function(r,n){if("function"==typeof e&&e.amd)e(["module","./utils","./form-field","./config.js"],n);else if("undefined"!=typeof s)n(i,t("./utils"),t("./form-field"),t("./config.js"));else{var o={exports:{}};n(o,r.utils,r.formField,r.config),r.handshake=o.exports}}(this,function(e,t,i,s){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=r(i),a=function(){function e(t){n(this,e),this.uniqueId=t,this.value=null,this.ready=!1}return e.prototype.isType=function e(t){return s.rules.type.fn.call({params:[t]},this.value)},e}(),u=function(){function e(){n(this,e),this._handshakes={},this.onInit()}return e.prototype.onInit=function e(){this.subscribe()},e.prototype.subscribe=function e(){this.subRegister=t.pubSub.subscribe("handshake:register",this.register.bind(this)),this.subExecute=t.pubSub.subscribe("handshake:addField",this.addField.bind(this)),this.subExecute=t.pubSub.subscribe("handshake:execute",this.execute.bind(this))},e.prototype.register=function e(t){this._handshakes.hasOwnProperty(t.key)||(this._handshakes[t.key]={fields:{},key:t.key})},e.prototype.addField=function e(t){this.register(t),this._handshakes[t.key].fields[t.fieldName]=new a(t.uniqueId)},e.prototype.setFieldReady=function e(t,i,s){var r=this._handshakes[t].fields[i];r.value=s,r.ready=!0},e.prototype.checkFieldsReady=function e(t){var i=this._handshakes[t].fields;for(var s in i)if(i.hasOwnProperty(s)&&!i[s].ready)return!1;return!0},e.prototype.execute=function e(t){var i=!!s.rules[t.key].hasOwnProperty("required")&&s.rules[t.key].required;this.setFieldReady(t.key,t.fieldName,t.fieldValue),!this.checkFieldsReady(t.key)&&i||s.rules[t.key].fn(this._handshakes[t.key].fields,this.callback.bind(this._handshakes[t.key],"field:callbackSuccess"),this.callback.bind(this._handshakes[t.key],"field:callbackError"),this.callback.bind(this._handshakes[t.key],"field:callbackIgnore"))},e.prototype.callback=function e(i){for(var s in this.fields)this.fields.hasOwnProperty(s)&&t.pubSub.publish(i,{uniqueId:this.fields[s].uniqueId,key:this.key})},e.prototype.destroy=function e(){this._handshakes=null,this.subRegister.remove(),this.subExecute.remove(),this.subExecute.remove(),this.subReset.remove()},e}();e.exports=new u})},{"./config.js":1,"./form-field":2,"./utils":7}],6:[function(t,i,s){!function(r,n){if("function"==typeof e&&e.amd)e(["module","./utils.js","./config.js"],n);else if("undefined"!=typeof s)n(i,t("./utils.js"),t("./config.js"));else{var o={exports:{}};n(o,r.utils,r.config),r.messages=o.exports}}(this,function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(t){s(this,e),this._elem=t,this._messages={},this.formName=null,this.fieldName=null,this.onInit()}return e.prototype.onInit=function e(){var t=this._elem.getAttribute(i.attributes.messages).split(".");this.formName=t[0],this.fieldName=t[1],this.registerBlockMessages(),this.subscribe(),this.clearMessages()},e.prototype.subscribe=function e(){this.subShow=t.pubSub.subscribe("messages:show",this.showMessage.bind(this)),this.subClear=t.pubSub.subscribe("messages:clear",this.clearMessages.bind(this)),this.subDestroy=t.pubSub.subscribe("messages:destroy",this.destroy.bind(this))},e.prototype.clearMessages=function e(t){var i=this._messages;if(void 0===t||t.fieldName===this.fieldName&&t.formName===this.formName)for(var s in i)this._messages.hasOwnProperty(s)&&(i[s].style.display="none")},e.prototype.showMessage=function e(t){t.fieldName===this.fieldName&&t.formName===this.formName&&(this.clearMessages(t),this._messages.hasOwnProperty(t.key)&&(this._messages[t.key].style.display="block"))},e.prototype.isKeyValid=function e(t){if(!this._messages.hasOwnProperty(t))throw new Error('Missing "gt-'+t+' in gt-messages="'+this.formName+"."+this.fieldName+'"')},e.prototype.registerBlockMessages=function e(){var s=this,r=null;(0,t.nl2arr)(this._elem.querySelectorAll(i.fieldQuery.message)).forEach(function(e){r=e.getAttribute(i.attributes.message),r&&(s._messages[r]=e)})},e.prototype.destroy=function e(){this._elem=null,this._messages=null,this.subShow.remove(),this.subClear.remove(),this.subDestroy.remove()},e}();e.exports=r})},{"./config.js":1,"./utils.js":7}],7:[function(t,i,s){!function(t,i){if("function"==typeof e&&e.amd)e(["exports"],i);else if("undefined"!=typeof s)i(s);else{var r={exports:{}};i(r.exports),t.utils=r.exports}}(this,function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function i(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function s(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}Object.defineProperty(e,"__esModule",{value:!0}),e.nl2arr=t,e.getUniqueId=i,e.convertCamelCase=s;var r=e.pubSub=function(){var e={},t=e.hasOwnProperty;return{subscribe:function i(s,r){t.call(e,s)||(e[s]=[]);var n=e[s].push(r)-1;return{remove:function t(){delete e[s][n]}}},publish:function i(s,r){t.call(e,s)&&
// Cycle through topics queue, fire!
e[s].forEach(function(e){e(void 0!=r?r:{})})}}}()})},{}],8:[function(t,i,s){!function(r,n){if("function"==typeof e&&e.amd)e(["module","./config","./utils"],n);else if("undefined"!=typeof s)n(i,t("./config"),t("./utils"));else{var o={exports:{}};n(o,r.config,r.utils),r.validator=o.exports}}(this,function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(i,r,n,o){s(this,e),this.key=i,this.fieldName=n,this.fieldUniqueId=o,this.state=t.validatorState.INIT,this.params=r.length?r.split(","):[],this.onInit()}return e.prototype.onInit=function e(){this.setPriority(),this.setHandshake()},e.prototype.setPriority=function e(){if(!t.rules.hasOwnProperty(this.key))throw new Error('Invalid directive, "gt-'+this.key+'"');this.priority=t.rules[this.key].priority},e.prototype.setHandshake=function e(){var s=this;t.rules[this.key].handshake&&i.pubSub.publish("handshake:addField",{key:s.key,fieldName:s.fieldName,uniqueId:s.fieldUniqueId})},e.prototype.validate=function e(i){var s=this,r=t.rules[this.key];r.handshake===!0?this.state=t.validatorState.HANDSHAKE:this.state=r.fn.call(this,i)?t.validatorState.SUCCESS:t.validatorState.ERROR},e.prototype.destroy=function e(){this.params.length=0},e}();e.exports=r})},{"./config":1,"./utils":7}]},{},[4])(4)});